(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",5e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=100?sessionStorage.setItem("current-bet",100):sessionStorage.setItem("current-bet",0),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet"));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;function r(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function c(e,t,o){document.querySelector(e).classList.add(t),setTimeout((()=>{document.querySelector(e).classList.remove(t)}),o)}function i(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function l(e,t){return Math.floor(Math.random()*(t-e)+e)}function a(e,t){return 100*t/e}let m=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=l(0,4),t=["jump","scale","rotate","rotate-2"],o=l(0,m.length);m.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")?e.classList.remove("_anim-icon-rotate"):e.classList.contains("_anim-icon-rotate-2")&&e.classList.remove("_anim-icon-rotate-2")})),setTimeout((()=>{m[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4);const u=50,d=35;function h(){sessionStorage.getItem("colb")||sessionStorage.setItem("colb",0),sessionStorage.getItem("glove")||sessionStorage.setItem("glove",0)}function _(){document.querySelector(".glove-price").textContent=d,document.querySelector(".colb-price").textContent=u}function g(){+sessionStorage.getItem("colb")>0?document.querySelectorAll(".colb-item__count").forEach((e=>e.textContent=sessionStorage.getItem("colb"))):document.querySelectorAll(".colb-item__count").forEach((e=>e.textContent="+")),+sessionStorage.getItem("glove")>0?document.querySelectorAll(".glove-item__count").forEach((e=>e.textContent=sessionStorage.getItem("glove"))):document.querySelectorAll(".glove-item__count").forEach((e=>e.textContent="+"))}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),document.querySelector(".back-images").classList.add("_active"),h(),_(),g()),document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&g();const S={current_win:0,state:0},y={boxer:document.querySelector(".content__boxer_1"),image:document.querySelector(".content__boxer_1 img"),health:2e3,currentDamage:0,count:1,timerIdFight:!1,timerIdBack:!1,left:35},b={boxer:document.querySelector(".content__boxer_2"),image:document.querySelector(".content__boxer_2 img"),health:2e3,count:1,timerIdFight:!1,timerIdBack:!1,right:35};var v;class f{constructor(e,t={}){L.preload(),this.currentSymbols=[["1"],["2"],["4"],["3"],["5"]],this.nextSymbols=[["1"],["2"],["4"],["3"],["5"]],this.container=e,this.reels=Array.from(this.container.getElementsByClassName("reel")).map(((e,t)=>new q(e,t,this.currentSymbols[t]))),this.betButton=document.querySelector(".bet-box__button_max"),this.betButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=100?(document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("money"),sessionStorage.setItem("current-bet",sessionStorage.getItem("money"))):i(".check")})),this.spinButton=document.querySelector(".bet-box__button_play"),this.spinButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?this.spin():i(".check")})),this.casinoAutoSpinCount=0,this.autoSpinButton=document.querySelector(".bet-box__button_auto"),this.autoSpinButton.addEventListener("click",(()=>{var e=this;this.casinoAutoSpinCount=0,+sessionStorage.getItem("money")>+sessionStorage.getItem("current-bet")&&(this.casinoAutoSpinCount++,this.spin()),v=setInterval((function(){e.casinoAutoSpinCount++,e.casinoAutoSpinCount<10&&b.health>0&&y.health>0?e.spin():clearInterval(v)}),8e3)})),t.inverted&&this.container.classList.add("inverted"),this.config=t}spin(){return 0==S.state&&(r(+sessionStorage.getItem("current-bet"),".check"),S.state=1),this.currentSymbols=this.nextSymbols,this.nextSymbols=[[L.random()],[L.random()],[L.random()],[L.random()],[L.random()]],this.onSpinStart(this.nextSymbols),Promise.all(this.reels.map((e=>(e.renderSymbols(this.nextSymbols[e.idx]),e.spin())))).then((()=>this.onSpinEnd(this.nextSymbols)))}onSpinStart(e){var t;this.spinButton.classList.add("_hold"),this.autoSpinButton.classList.add("_hold"),this.betButton.classList.add("_hold"),document.querySelector(".block-bet").classList.contains("_hold")||document.querySelector(".block-bet").classList.add("_hold"),document.querySelector(".glove-item_game").classList.contains("_active")&&document.querySelector(".glove-item_game").classList.remove("_active"),y.currentDamage=0,this.config.onSpinStart?.(e),t=".reel",document.querySelectorAll(t).forEach((e=>{e.classList.contains("_active")&&e.classList.remove("_active")}))}onSpinEnd(e){this.config.onSpinEnd?.(e)}}class q{constructor(e,t,o){this.reelContainer=e,this.idx=t,this.symbolContainer=document.createElement("div"),this.symbolContainer.classList.add("icons"),this.reelContainer.appendChild(this.symbolContainer),this.animation=this.symbolContainer.animate([{transform:"none",filter:"blur(0)"},{filter:"blur(2px)",offset:.5},{transform:`translateY(-${10*Math.floor(this.factor)/(1+10*Math.floor(this.factor))*100}%)`,filter:"blur(0)"}],{duration:1e3*this.factor,easing:"ease-in-out"}),this.animation.cancel(),o.forEach((e=>this.symbolContainer.appendChild(new L(e).img)))}get factor(){return 1+Math.pow(this.idx/2,2)}renderSymbols(e){const t=document.createDocumentFragment();for(let o=1;o<1+10*Math.floor(this.factor);o++){const s=new L(o>=10*Math.floor(this.factor)-2?e[o-10*Math.floor(this.factor)]:void 0);t.appendChild(s.img)}this.symbolContainer.appendChild(t)}spin(){const e=new Promise((e=>this.animation.onfinish=e)),t=new Promise((e=>setTimeout(e,1e3*this.factor)));return this.animation.play(),Promise.race([e,t]).then((()=>{"finished"!==this.animation.playState&&this.animation.finish();const e=this.symbolContainer.children.length-1;for(let t=0;t<e;t++)this.symbolContainer.firstChild.remove()}))}}const p={};class L{constructor(e=L.random()){this.name=e,p[e]?this.img=p[e].cloneNode():(this.img=new Image,this.img.src=`img/icons/icon-${e}.png`,p[e]=this.img)}static preload(){L.symbols.forEach((e=>new L(e)))}static get symbols(){return["1","2","3","4","5"]}static random(){return this.symbols[Math.floor(Math.random()*this.symbols.length)]}}const I={inverted:!1,onSpinStart:e=>{},onSpinEnd:e=>{+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(x(".reel",0),x(".reel",1),x(".reel",2),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(3)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[3]?(x(".reel",0),x(".reel",1),x(".reel",2),x(".reel",3),w(),setTimeout((()=>{A(2)}),2500)):+e[0]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(x(".reel",0),x(".reel",2),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[3]&&+e[3]==+e[4]?(x(".reel",0),x(".reel",1),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[4]?(x(".reel",0),x(".reel",1),x(".reel",2),x(".reel",4),w(),setTimeout((()=>{A(2)}),2500)):+e[1]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(x(".reel",1),x(".reel",2),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]?(x(".reel",0),x(".reel",1),x(".reel",2),w(),setTimeout((()=>{A(1)}),2500)):+e[0]==+e[1]&&+e[1]==+e[3]?(x(".reel",0),x(".reel",1),x(".reel",3),w(),setTimeout((()=>{A(1)}),2500)):+e[0]==+e[1]&&+e[1]==+e[4]?(x(".reel",0),x(".reel",1),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):+e[0]==+e[2]&&+e[2]==+e[3]?(x(".reel",0),x(".reel",2),x(".reel",3),w(),setTimeout((()=>{A(1)}),2500)):+e[0]==+e[2]&&+e[2]==+e[4]?(x(".reel",0),x(".reel",2),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):+e[0]==+e[3]&&+e[3]==+e[4]?(x(".reel",0),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):+e[1]==+e[2]&&+e[2]==+e[3]?(x(".reel",1),x(".reel",2),x(".reel",3),w(),setTimeout((()=>{A(1)}),2500)):+e[1]==+e[3]&&+e[3]==+e[4]?(x(".reel",1),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):+e[1]==+e[2]&&+e[2]==+e[4]?(x(".reel",1),x(".reel",2),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):+e[2]==+e[3]&&+e[3]==+e[4]?(x(".reel",2),x(".reel",3),x(".reel",4),w(),setTimeout((()=>{A(1)}),2500)):(document.querySelectorAll(".bet-box__button").forEach((e=>{e.classList.contains("bet-box__button_max")||e.classList.add("_hold")})),b.timerIdFight=setInterval((()=>{b.count++,b.boxer.style.right=`${b.count}%`,b.count>=b.right&&(clearInterval(b.timerIdFight),b.image.setAttribute("src","img/gif/boxer-2-fight.gif"),setTimeout((()=>{b.image.setAttribute("src","img/gif/boxer-2-stay.gif"),b.timerIdBack=setInterval((()=>{b.count--,b.boxer.style.right=`${b.count}%`,b.count<=1&&clearInterval(b.timerIdBack)}),50)}),1500))}),50),setTimeout((()=>{!function(){let e=l(100,400);C(".content__boxer_1",e,1),y.health=y.health-e,y.health<=0?(document.querySelector(".header__current-health_1").style.width="0%",setTimeout((()=>{document.querySelector(".content__boxer_1").classList.add("_hide")}),1e3)):document.querySelector(".header__current-health_1").style.width=`${a(2e3,y.health)}%`;E()}()}),2500))}};if(document.querySelector(".game")){new f(document.getElementById("slot"),I)}function x(e,t){document.querySelectorAll(e)[t].classList.add("_active")}function w(){document.querySelectorAll(".bet-box__button").forEach((e=>{e.classList.contains("bet-box__button_max")||e.classList.add("_hold")})),y.timerIdFight=setInterval((()=>{y.count++,y.boxer.style.left=`${y.count}%`,y.count>=y.left&&(clearInterval(y.timerIdFight),y.image.setAttribute("src","img/gif/boxer-1-fight.gif"),setTimeout((()=>{y.image.setAttribute("src","img/gif/boxer-1-stay.gif"),y.timerIdBack=setInterval((()=>{y.count--,y.boxer.style.left=`${y.count}%`,y.count<=1&&(clearInterval(y.timerIdBack),y.currentDamage>0&&+sessionStorage.getItem("glove")>0&&b.health>0&&document.querySelector(".glove-item_game").classList.add("_active"))}),50)}),1e3))}),50)}function A(e){if(1==e){let e=l(250,350);C(".content__boxer_2",e,2),b.health=b.health-e,y.currentDamage=e}else if(2==e){let e=l(400,800);C(".content__boxer_2",e,2),b.health=b.health-e,y.currentDamage=e}else if(3==e){let e=l(800,1200);C(".content__boxer_2",e,2),b.health=b.health-e,y.currentDamage=e}b.health<=0?(document.querySelector(".header__current-health_2").style.width="0%",setTimeout((()=>{document.querySelector(".content__boxer_2").classList.add("_hide")}),1e3)):document.querySelector(".header__current-health_2").style.width=`${a(2e3,b.health)}%`,E()}function C(e,t,o){let s=document.createElement("div");1==o?(s.classList.add("content__text"),s.classList.add("content__text_1")):2==o&&(s.classList.add("content__text"),s.classList.add("content__text_2")),s.textContent=`+${t}`,document.querySelector(e).append(s),setTimeout((()=>{s.remove()}),2e3)}function E(){if(b.health<=0){let e=5;y.health>1e3&&(e=10),S.current_win=+sessionStorage.getItem("current-bet")*e,document.querySelector(".win__sub-text").textContent="victory",document.querySelector(".win__text").textContent=S.current_win,function(e,t,o,s){let n=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",n),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(S.current_win,".check",1e3,2e3),setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),1e3)}else y.health<=0?(document.querySelector(".win__sub-text").textContent="defeat",document.querySelector(".win").classList.add("_loose"),setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),1e3)):(document.querySelector(".bet-box__button_play").classList.remove("_hold"),document.querySelector(".bet-box__button_auto").classList.remove("_hold"))}if(s>800&&(y.left=45,b.right=45),n>600&&(y.left=15,b.right=20),document.querySelector(".main")){const e=new Audio;e.preload="auto",e.src="files/audio-main.wav",e.loop=[!0],e.volume=.3,document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}if(document.querySelector(".game")){const e=new Audio;e.preload="auto",e.src="files/audio-game.mp3",e.loop=[!0],e.volume=.3,document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}document.addEventListener("click",(e=>{let s=e.target,n=+sessionStorage.getItem("money"),l=+sessionStorage.getItem("current-bet");s.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),document.querySelector(".back-images").classList.add("_active"),h(),_(),g())),s.closest(".main__button_shop")&&document.querySelector(".main__body").classList.add("_shop"),s.closest(".main__button-back")&&document.querySelector(".main__body").classList.remove("_shop"),s.closest(".shop__button_glove ")&&(n>=d?(r(d,".check"),sessionStorage.setItem("glove",+sessionStorage.getItem("glove")+1),setTimeout((()=>{g()}),500),c(".shop__icon-glove","_anim",1e3),c(".shop__button_glove","_hold",1e3)):i(".check")),s.closest(".shop__button_colb")&&(n>=u?(r(u,".check"),sessionStorage.setItem("colb",+sessionStorage.getItem("colb")+1),setTimeout((()=>{g()}),500),c(".shop__icon-colb","_anim",1e3),c(".shop__button_colb","_hold",1e3)):i(".check")),s.closest(".block-bet__minus")&&l>100&&(sessionStorage.setItem("current-bet",l-100),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),s.closest(".block-bet__plus")&&(n-100>l?(sessionStorage.setItem("current-bet",l+100),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):i(".check")),s.closest(".colb-item_game")&&+sessionStorage.getItem("colb")>0&&(sessionStorage.setItem("colb",+sessionStorage.getItem("colb")-1),document.querySelector(".colb-item__count").textContent=sessionStorage.getItem("colb"),document.querySelector(".header__current-health_1").classList.add("_active"),setTimeout((()=>{document.querySelector(".header__current-health_1").classList.remove("_active")}),1500),y.health+=1e3,y.health>2e3&&(y.health=2e3),document.querySelector(".header__current-health_1").style.width=`${a(2e3,y.health)}%`),s.closest(".glove-item_game")&&+sessionStorage.getItem("glove")>0&&(sessionStorage.setItem("glove",+sessionStorage.getItem("glove")-1),document.querySelector(".glove-item__count").textContent=sessionStorage.getItem("glove"),w(),setTimeout((()=>{C(".content__boxer_2",y.currentDamage,2),b.health=b.health-y.currentDamage,b.health<=0?(document.querySelector(".header__current-health_2").style.width="0%",setTimeout((()=>{document.querySelector(".content__boxer_2").classList.add("_hide")}),1e3)):document.querySelector(".header__current-health_2").style.width=`${a(2e3,b.health)}%`,E(),y.currentDamage=0}),2e3),document.querySelector(".glove-item_game").classList.remove("_active")),s.closest(".win__button_play")&&(S.state=0,b.health=2e3,y.health=2e3,y.currentDamage=0,document.querySelector(".header__current-health_1").style.width="100%",document.querySelector(".header__current-health_2").style.width="100%",document.querySelector(".block-bet").classList.remove("_hold"),document.querySelectorAll(".bet-box__button").forEach((e=>e.classList.remove("_hold"))),document.querySelectorAll(".content__boxer").forEach((e=>{e.classList.contains("_hide")&&e.classList.remove("_hide")})),setTimeout((()=>{document.querySelector(".win").classList.remove("_active")}),100),setTimeout((()=>{document.querySelector(".win").classList.contains("_loose")&&document.querySelector(".win").classList.remove("_loose")}),500))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();