(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",5e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=100?sessionStorage.setItem("current-bet",100):sessionStorage.setItem("current-bet",0),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet"));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),n=document.documentElement.clientWidth;document.documentElement.clientHeight;function s(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function r(e,t,o){document.querySelector(e).classList.add(t),setTimeout((()=>{document.querySelector(e).classList.remove(t)}),o)}function i(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function c(e,t){return Math.floor(Math.random()*(t-e)+e)}function l(e,t){return 100*t/e}let a=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=c(0,4),t=["jump","scale","rotate","rotate-2"],o=c(0,a.length);a.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")?e.classList.remove("_anim-icon-rotate"):e.classList.contains("_anim-icon-rotate-2")&&e.classList.remove("_anim-icon-rotate-2")})),setTimeout((()=>{a[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4);const m=50,u=35;function d(){sessionStorage.getItem("colb")||sessionStorage.setItem("colb",0),sessionStorage.getItem("glove")||sessionStorage.setItem("glove",0)}function h(){document.querySelector(".glove-price").textContent=u,document.querySelector(".colb-price").textContent=m}function g(){+sessionStorage.getItem("colb")>0?document.querySelectorAll(".colb-item__count").forEach((e=>e.textContent=sessionStorage.getItem("colb"))):document.querySelectorAll(".colb-item__count").forEach((e=>e.textContent="+")),+sessionStorage.getItem("glove")>0?document.querySelectorAll(".glove-item__count").forEach((e=>e.textContent=sessionStorage.getItem("glove"))):document.querySelectorAll(".glove-item__count").forEach((e=>e.textContent="+"))}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),document.querySelector(".back-images").classList.add("_active"),d(),h(),g()),document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&g();var _;class S{constructor(e,t={}){f.preload(),this.currentSymbols=[["1"],["2"],["4"],["3"],["5"]],this.nextSymbols=[["1"],["2"],["4"],["3"],["5"]],this.container=e,this.reels=Array.from(this.container.getElementsByClassName("reel")).map(((e,t)=>new b(e,t,this.currentSymbols[t]))),this.betButton=document.querySelector(".bet-box__button_max"),this.betButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=100?(document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("money"),sessionStorage.setItem("current-bet",sessionStorage.getItem("money"))):i(".check")})),this.spinButton=document.querySelector(".bet-box__button_play"),this.spinButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?this.spin():i(".check")})),this.casinoAutoSpinCount=0,this.autoSpinButton=document.querySelector(".bet-box__button_auto"),this.autoSpinButton.addEventListener("click",(()=>{var e=this;this.casinoAutoSpinCount=0,+sessionStorage.getItem("money")>+sessionStorage.getItem("current-bet")&&(this.casinoAutoSpinCount++,this.spin()),_=setInterval((function(){e.casinoAutoSpinCount++,e.casinoAutoSpinCount<10&&+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?e.spin():(clearInterval(_),i(".check"))}),5500)})),t.inverted&&this.container.classList.add("inverted"),this.config=t}spin(){return this.currentSymbols=this.nextSymbols,this.nextSymbols=[[f.random()],[f.random()],[f.random()],[f.random()],[f.random()]],this.onSpinStart(this.nextSymbols),Promise.all(this.reels.map((e=>(e.renderSymbols(this.nextSymbols[e.idx]),e.spin())))).then((()=>this.onSpinEnd(this.nextSymbols)))}onSpinStart(e){var t;this.spinButton.classList.add("_hold"),this.autoSpinButton.classList.add("_hold"),this.betButton.classList.add("_hold"),document.querySelector(".block-bet").classList.add("_hold"),this.config.onSpinStart?.(e),t=".reel",document.querySelectorAll(t).forEach((e=>{e.classList.contains("_active")&&e.classList.remove("_active")}))}onSpinEnd(e){this.spinButton.classList.remove("_hold"),this.autoSpinButton.classList.remove("_hold"),this.betButton.classList.remove("_hold"),document.querySelector(".block-bet").classList.remove("_hold"),this.config.onSpinEnd?.(e)}}class b{constructor(e,t,o){this.reelContainer=e,this.idx=t,this.symbolContainer=document.createElement("div"),this.symbolContainer.classList.add("icons"),this.reelContainer.appendChild(this.symbolContainer),this.animation=this.symbolContainer.animate([{transform:"none",filter:"blur(0)"},{filter:"blur(2px)",offset:.5},{transform:`translateY(-${10*Math.floor(this.factor)/(1+10*Math.floor(this.factor))*100}%)`,filter:"blur(0)"}],{duration:1e3*this.factor,easing:"ease-in-out"}),this.animation.cancel(),o.forEach((e=>this.symbolContainer.appendChild(new f(e).img)))}get factor(){return 1+Math.pow(this.idx/2,2)}renderSymbols(e){const t=document.createDocumentFragment();for(let o=1;o<1+10*Math.floor(this.factor);o++){const n=new f(o>=10*Math.floor(this.factor)-2?e[o-10*Math.floor(this.factor)]:void 0);t.appendChild(n.img)}this.symbolContainer.appendChild(t)}spin(){const e=new Promise((e=>this.animation.onfinish=e)),t=new Promise((e=>setTimeout(e,1e3*this.factor)));return this.animation.play(),Promise.race([e,t]).then((()=>{"finished"!==this.animation.playState&&this.animation.finish();const e=this.symbolContainer.children.length-1;for(let t=0;t<e;t++)this.symbolContainer.firstChild.remove()}))}}const y={};class f{constructor(e=f.random()){this.name=e,y[e]?this.img=y[e].cloneNode():(this.img=new Image,this.img.src=`img/icons/icon-${e}.png`,y[e]=this.img)}static preload(){f.symbols.forEach((e=>new f(e)))}static get symbols(){return["1","2","3","4","5"]}static random(){return this.symbols[Math.floor(Math.random()*this.symbols.length)]}}const p={inverted:!1,onSpinStart:e=>{},onSpinEnd:e=>{console.log(e),console.log(+e[0]),console.log(+e[1]),console.log(+e[2]),console.log(+e[3]),console.log(+e[4]),+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ ВСЕ ОДИНАКОВЫЕ"),I(".reel",0),I(".reel",1),I(".reel",2),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(3)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[3]?(console.log("ВЫПАЛИ 4 ОДИНАКОВЫХ - 1, 2, 3, 4"),I(".reel",0),I(".reel",1),I(".reel",2),I(".reel",3),L(),setTimeout((()=>{x(2)}),2500)):+e[0]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 4 ОДИНАКОВЫХ - 1, 3, 4, 5"),I(".reel",0),I(".reel",2),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 4 ОДИНАКОВЫХ - 1, 2, 4, 5"),I(".reel",0),I(".reel",1),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]&&+e[2]==+e[4]?(console.log("ВЫПАЛИ 4 ОДИНАКОВЫХ - 1, 2, 3, 5"),I(".reel",0),I(".reel",1),I(".reel",2),I(".reel",4),L(),setTimeout((()=>{x(2)}),2500)):+e[1]==+e[2]&&+e[2]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 4 ОДИНАКОВЫХ - 2, 3, 4, 5"),I(".reel",1),I(".reel",2),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(2)}),2500)):+e[0]==+e[1]&&+e[1]==+e[2]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 2, 3"),I(".reel",0),I(".reel",1),I(".reel",2),L(),setTimeout((()=>{x(1)}),2500)):+e[0]==+e[1]&&+e[1]==+e[3]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 2, 4"),console.log("ЭТОТ НЕ срабатывал"),I(".reel",0),I(".reel",1),I(".reel",3),L(),setTimeout((()=>{x(1)}),2500)):+e[0]==+e[1]&&+e[1]==+e[4]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 2, 5"),I(".reel",0),I(".reel",1),I(".reel",4),L(),setTimeout((()=>{x(1)}),2500)):+e[0]==+e[2]&&+e[2]==+e[3]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 3, 4"),I(".reel",0),I(".reel",2),I(".reel",3),L(),setTimeout((()=>{x(1)}),2500)):+e[0]==+e[2]&&+e[2]==+e[4]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 3, 5"),I(".reel",0),I(".reel",2),I(".reel",4),L(),setTimeout((()=>{x(1)}),2500)):+e[0]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 1, 4, 5"),I(".reel",0),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(1)}),2500)):+e[1]==+e[2]&&+e[2]==+e[3]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 2, 3, 4"),I(".reel",1),I(".reel",2),I(".reel",3),L(),setTimeout((()=>{x(1)}),2500)):+e[1]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 2, 4, 5"),I(".reel",1),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(1)}),2500)):+e[2]==+e[3]&&+e[3]==+e[4]?(console.log("ВЫПАЛИ 3 ОДИНАКОВЫХ - 3, 4, 5"),I(".reel",2),I(".reel",3),I(".reel",4),L(),setTimeout((()=>{x(1)}),2500)):(console.log("НИЧЕГО НЕ ВЫПАЛО - СОПЕРНИК НАНОСИТ УДАР"),document.querySelectorAll(".bet-box__button").forEach((e=>e.classList.add("_hold"))),q.timerIdFight=setInterval((()=>{q.count++,q.boxer.style.right=`${q.count}%`,q.count>=q.right&&(clearInterval(q.timerIdFight),q.image.setAttribute("src","img/gif/boxer-2-fight.gif"),setTimeout((()=>{q.image.setAttribute("src","img/gif/boxer-2-stay.gif"),q.timerIdBack=setInterval((()=>{q.count--,q.boxer.style.right=`${q.count}%`,q.count<=1&&clearInterval(q.timerIdBack)}),50)}),1500),document.querySelectorAll(".bet-box__button").forEach((e=>e.classList.remove("_hold"))))}),50),setTimeout((()=>{!function(){let e=c(200,400);A(".content__boxer_1",e,1),v.health=v.health-e,q.health<=0?document.querySelector(".header__current-health_1").style.width="0%":document.querySelector(".header__current-health_1").style.width=`${l(2e3,v.health)}%`;C()}()}),2500))}};if(document.querySelector(".game")){new S(document.getElementById("slot"),p)}function I(e,t){document.querySelectorAll(e)[t].classList.add("_active")}const v={boxer:document.querySelector(".content__boxer_1"),image:document.querySelector(".content__boxer_1 img"),health:2e3,count:1,timerIdFight:!1,timerIdBack:!1,left:35},q={boxer:document.querySelector(".content__boxer_2"),image:document.querySelector(".content__boxer_2 img"),health:2e3,count:1,timerIdFight:!1,timerIdBack:!1,right:35};function L(){document.querySelectorAll(".bet-box__button").forEach((e=>e.classList.add("_hold"))),v.timerIdFight=setInterval((()=>{v.count++,v.boxer.style.left=`${v.count}%`,v.count>=v.left&&(clearInterval(v.timerIdFight),v.image.setAttribute("src","img/gif/boxer-1-fight.gif"),setTimeout((()=>{v.image.setAttribute("src","img/gif/boxer-1-stay.gif"),v.timerIdBack=setInterval((()=>{v.count--,v.boxer.style.left=`${v.count}%`,v.count<=1&&clearInterval(v.timerIdBack)}),50)}),1e3),document.querySelectorAll(".bet-box__button").forEach((e=>e.classList.remove("_hold"))))}),50)}function x(e){if(1==e){let e=c(250,350);A(".content__boxer_2",e,2),q.health=q.health-e}else if(2==e){let e=c(400,500);A(".content__boxer_2",e,2),q.health=q.health-e}else if(3==e){let e=c(650,800);A(".content__boxer_2",e,2),q.health=q.health-e}q.health<=0?document.querySelector(".header__current-health_2").style.width="0%":document.querySelector(".header__current-health_2").style.width=`${l(2e3,q.health)}%`,C()}function A(e,t,o){let n=document.createElement("div");1==o?(n.classList.add("content__text"),n.classList.add("content__text_1")):2==o&&(n.classList.add("content__text"),n.classList.add("content__text_2")),n.textContent=`+${t}`,document.querySelector(e).append(n),setTimeout((()=>{n.remove()}),2e3)}function C(){(q.health<=0||v.health<=0)&&setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),1e3)}n>800&&(v.left=45,q.right=45),document.addEventListener("click",(e=>{let n=e.target,c=+sessionStorage.getItem("money"),l=+sessionStorage.getItem("current-bet");n.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),document.querySelector(".back-images").classList.add("_active"),d(),h(),g())),n.closest(".main__button_shop")&&document.querySelector(".main__body").classList.add("_shop"),n.closest(".main__button-back")&&document.querySelector(".main__body").classList.remove("_shop"),n.closest(".shop__button_glove ")&&(c>=u?(s(u,".check"),sessionStorage.setItem("glove",+sessionStorage.getItem("glove")+1),setTimeout((()=>{g()}),500),r(".shop__icon-glove","_anim",1e3),r(".shop__button_glove","_hold",1e3)):i(".check")),n.closest(".shop__button_colb")&&(c>=m?(s(m,".check"),sessionStorage.setItem("colb",+sessionStorage.getItem("colb")+1),setTimeout((()=>{g()}),500),r(".shop__icon-colb","_anim",1e3),r(".shop__button_colb","_hold",1e3)):i(".check")),n.closest(".block-bet__minus")&&l>100&&(sessionStorage.setItem("current-bet",l-100),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),n.closest(".block-bet__plus")&&(c-100>l?(sessionStorage.setItem("current-bet",l+100),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):i(".check"))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();